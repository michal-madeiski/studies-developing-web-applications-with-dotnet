@page
@model Lab11.Pages.Shop.IndexModel
@{
    ViewData["Title"] = "Index";
    var categories = ViewData["Categories"] as IEnumerable<Lab11.Models.Category>;
    var selectedId = ViewData["SelectedCategoryId"] as int?;
}

<h1>Shop</h1>

<form method="get">
    <select name="cat_id" onchange="this.form.submit()" class="select-cat">
        <option value="">-- All Categories --</option>
        @if (categories != null)
        {
            @foreach (var category in categories)
            {
                if (selectedId == category.Id)
                {
                    <option value="@category.Id" selected>@category.Name</option>
                }
                else
                {
                    <option value="@category.Id">@category.Name</option>
                }
            }
        }
    </select>
</form>

<partial name="_ArticleGrid" model="Model.Articles" />
