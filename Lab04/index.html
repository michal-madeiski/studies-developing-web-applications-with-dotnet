<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Lab04</title>
</head>
<body>
    <h1>lab04 - losowa tabliczka mnożenia i canvas</h1>
    <div class="separator"></div>
    <div class="tableWrapper">
        <p id="tableInfo">test</p>
        <div id="tableWrapper"></div>
        <p class="lorem">Lorem ipsum dolor sit amet consectetur adipisicing elit. Ab debitis, sequi aliquam, saepe reiciendis molestias optio error incidunt cupiditate magnam nemo quos distinctio? At dignissimos modi reprehenderit quam quos maiores a, obcaecati laudantium harum? Molestias facere commodi accusantium, quo doloribus amet neque perferendis saepe atque aliquid illum odio animi beatae quis minima eaque reiciendis alias. Architecto voluptate quod iste minima, aspernatur rerum aperiam quo. Quas ipsa consequatur pariatur ipsam, et eligendi reprehenderit voluptates consequuntur nemo alias quae officiis minus, inventore dolore tempore sed, saepe quidem similique? Est tempora, dolor impedit assumenda quasi vel eos ut quas at, aut rerum autem? Incidunt qui commodi omnis velit est molestias quaerat consequuntur tempora dolores ullam illum odio modi corrupti possimus officiis laudantium, fugiat, cum consectetur repellendus. Provident voluptatum illo, autem praesentium fuga quasi ab dolorum reiciendis aliquam, molestiae blanditiis ex tempora? Fugit incidunt ratione, ipsum officiis eaque nemo eligendi dolor similique culpa deserunt. Fuga asperiores consectetur ipsam tempora vero. Cupiditate, assumenda voluptatum. Debitis id molestias officiis at blanditiis, earum suscipit excepturi distinctio ex tempore esse sapiente delectus temporibus omnis in, incidunt ducimus asperiores perspiciatis beatae provident commodi mollitia natus! Quam, explicabo doloribus voluptatibus quod in distinctio, repellat corporis quasi cum eos eveniet odit, molestias cumque. Consequuntur, rerum corporis, quis odio mollitia unde pariatur iste, incidunt sit nisi nihil explicabo soluta repellat veritatis voluptates itaque sequi et cum dignissimos provident laboriosam. Commodi quasi recusandae et molestiae! Suscipit iure vitae, soluta praesentium quos dignissimos, unde nisi error consequatur excepturi, quaerat recusandae ipsa voluptas. Culpa velit blanditiis, sapiente qui aliquid ipsa quidem architecto! Commodi, et? Hic nostrum inventore alias itaque nemo distinctio nesciunt beatae voluptatibus omnis commodi perferendis odit similique quo, earum dolore pariatur voluptate neque quae magni praesentium optio ipsum veniam molestiae! Consequatur veniam non dolor magnam saepe tempora quo quibusdam, quidem deserunt ullam sit nulla facere, voluptates asperiores excepturi inventore quae iste. Rerum pariatur minus eum sapiente totam dicta aliquid quo inventore culpa et? Perspiciatis itaque harum dignissimos adipisci. Aliquam, quae. Vel quos quia, fugit repudiandae culpa ipsum! Eum sunt vel soluta obcaecati provident molestiae sit, iure temporibus nihil praesentium odio expedita, aspernatur pariatur quisquam, nemo voluptates ullam distinctio adipisci accusantium. Repellat, maiores, nihil veniam alias corrupti odio sunt optio molestiae error dicta expedita laudantium voluptas perferendis quo! Excepturi asperiores, veritatis dolorem id dicta facere vitae illo numquam unde nemo ab voluptatem error voluptate maiores esse. Praesentium pariatur eaque iusto sit animi maxime hic in dolores vero, deserunt distinctio, incidunt quam rerum quasi architecto adipisci laudantium suscipit accusamus amet provident corrupti cum exercitationem. Obcaecati, deleniti ipsum accusantium, ipsa velit eius iusto ea quod accusamus, sint totam quas eos pariatur! Reiciendis aliquam architecto est tempore consectetur harum dolorum sed quos ducimus! Necessitatibus et eveniet voluptate. Rem ut dolorem a, cupiditate consequuntur id perspiciatis architecto atque animi saepe odio perferendis ipsa eum hic quo consequatur explicabo veniam repellat nostrum culpa sapiente inventore voluptatem nam aspernatur? Nihil et natus neque omnis quo dolorum nam hic placeat? Impedit facilis odit quae cum exercitationem delectus corrupti. Veritatis, eos neque!</p>
    </div>

    <div class="canvasWrapper">
        <canvas class="drawingX"></canvas>
        <canvas class="drawingX"></canvas>
        <canvas class="drawingX"></canvas>
    </div>

    <script>
        window.addEventListener("load", function() {
            let n = parseInt(window.prompt("Podaj rozmiar n tabliczki mnożenia (5 <= n <=20): "));

            if (isNaN(n)) {
                const p = document.getElementById("tableInfo");
                p.innerText = "Wprowadzony rozmiar nie jest liczbą";
            } else {
                function validateN(n) {
                    const p = document.getElementById("tableInfo");
                    if (n < 5 || n > 20) {
                        p.innerText = "Wprowadzony rozmiar jest nieprawidłowy. Zastosowano: n = 10.";
                        return 10;
                    } else {
                        p.innerText = "Wprowadzony rozmiar jest prawidłowy. Zastosowano: n = " + n + ".";
                        return n;
                    }
                }

                n = validateN(n);

                function createTable(n) {
                    const headerValues = [];

                    const tabWrap = document.getElementById("tableWrapper");

                    const table = document.createElement("table");
                    const thead = document.createElement("thead");
                    const trHead = document.createElement("tr");
                    for (let i = 0; i <= n; i++) {
                        const th = document.createElement("th");
                        if (i != 0) {
                            const value = Math.floor(Math.random() * 99) + 1;
                            th.textContent = value;
                            headerValues.push(value);
                        }
                        trHead.appendChild(th);
                    }
                    thead.appendChild(trHead);
                    table.appendChild(thead);
            
                    const tbody = document.createElement("tbody");

                    for (let i = 0; i < n; i++) {
                        const tr = document.createElement("tr");
                        for (let j = 0; j <= n; j++) {
                            if (j == 0) {
                                const th = document.createElement("th");
                                th.textContent = headerValues[i];
                                tr.appendChild(th);
                            } else {
                                const td = document.createElement("td");
                                let content = headerValues[i] * headerValues[j - 1];
                                td.textContent = content;
                                if (content % 2 != 0) {
                                    td.className = "odd";
                                } else {
                                    td.className = "even";
                                }
                                tr.appendChild(td);
                            }
                        }
                        tbody.appendChild(tr);
                    }

                    table.appendChild(tbody);
                    tabWrap.appendChild(table);
                }
                createTable(n);
            }
        });
    </script>

    <script>
        window.addEventListener("load", function() {
            function draw(canvas) {
                const ctx = canvas.getContext("2d");

                function resizeCanvas() {
                    canvas.width = canvas.clientWidth;
                    canvas.height = canvas.clientHeight;
                    ctx.strokeStyle = "green";
                    ctx.lineWidth = 1;
                }
                
                function drawInner(e) {
                    const width = canvas.clientWidth;
                    const height = canvas.clientHeight;
                    const mouseX = e.offsetX;
                    const mouseY = e.offsetY;

                    ctx.clearRect(0, 0, width, height);

                    ctx.beginPath();

                    ctx.moveTo(0, mouseY);
                    ctx.lineTo(mouseX, mouseY);

                    ctx.moveTo(mouseX, 0);
                    ctx.lineTo(mouseX, mouseY);

                    ctx.moveTo(mouseX, height);
                    ctx.lineTo(mouseX, mouseY);

                    ctx.moveTo(width, mouseY);
                    ctx.lineTo(mouseX, mouseY);

                    ctx.setLineDash([5, 5]);
                    ctx.arc(mouseX, mouseY, 20, 0, 2*Math.PI);

                    ctx.stroke();
                }

                resizeCanvas();
                canvas.addEventListener("mousemove", drawInner);
                canvas.addEventListener("mouseleave", () => ctx.clearRect(0, 0, canvas.clientWidth, canvas.clientHeight));
                window.addEventListener("resize", resizeCanvas);
            }
            
            const canvases = document.querySelectorAll(".drawingX");
            canvases.forEach(canvas => draw(canvas));
        });
    </script>
</body>
</html>